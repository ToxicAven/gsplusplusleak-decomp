// 
// Decompiled by Procyon v0.5.36
// 

package com.gamesense.client.module.modules.exploits;

import java.util.function.Predicate;
import net.minecraft.network.Packet;
import net.minecraft.entity.Entity;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.block.BlockContainer;
import net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock;
import me.zero.alpine.listener.EventHandler;
import com.gamesense.api.event.events.PacketEvent;
import me.zero.alpine.listener.Listener;
import com.gamesense.api.setting.values.BooleanSetting;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;

@Declaration(name = "NoInteract", category = Category.Exploits)
public class NoInteract extends Module
{
    BooleanSetting containerOnly;
    private boolean shouldStop;
    @EventHandler
    private final Listener<PacketEvent.Send> sendListener;
    @EventHandler
    private final Listener<PacketEvent.PostSend> postSendListener;
    
    public NoInteract() {
        this.containerOnly = this.registerBoolean("Container Only", false);
        this.shouldStop = false;
        CPacketPlayerTryUseItemOnBlock packet;
        this.sendListener = new Listener<PacketEvent.Send>(event -> {
            if (event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock && !NoInteract.mc.field_71439_g.func_70093_af()) {
                packet = (CPacketPlayerTryUseItemOnBlock)event.getPacket();
                if (!this.containerOnly.getValue() || NoInteract.mc.field_71441_e.func_180495_p(packet.func_187023_a()).func_177230_c() instanceof BlockContainer) {
                    NoInteract.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketEntityAction((Entity)NoInteract.mc.field_71439_g, CPacketEntityAction.Action.START_SNEAKING));
                    this.shouldStop = true;
                }
            }
            return;
        }, (Predicate<PacketEvent.Send>[])new Predicate[0]);
        CPacketPlayerTryUseItemOnBlock packet2;
        this.postSendListener = new Listener<PacketEvent.PostSend>(event -> {
            if (event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock && this.shouldStop) {
                packet2 = (CPacketPlayerTryUseItemOnBlock)event.getPacket();
                if (!this.containerOnly.getValue() || NoInteract.mc.field_71441_e.func_180495_p(packet2.func_187023_a()).func_177230_c() instanceof BlockContainer) {
                    NoInteract.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketEntityAction((Entity)NoInteract.mc.field_71439_g, CPacketEntityAction.Action.STOP_SNEAKING));
                    this.shouldStop = false;
                }
            }
        }, (Predicate<PacketEvent.PostSend>[])new Predicate[0]);
    }
}
